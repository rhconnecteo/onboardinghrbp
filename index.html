<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gestionnaire Collaborateurs - HRBP</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='30' cy='40' r='15' fill='%2306b6d4' opacity='0.9'/><circle cx='50' cy='25' r='15' fill='%2310b981' opacity='0.9'/><circle cx='70' cy='40' r='15' fill='%2306b6d4' opacity='0.9'/><line x1='30' y1='40' x2='50' y2='25' stroke='%2310b981' stroke-width='2' opacity='0.6'/><line x1='50' y1='25' x2='70' y2='40' stroke='%2306b6d4' stroke-width='2' opacity='0.6'/><line x1='30' y1='40' x2='70' y2='40' stroke='%2310b981' stroke-width='2' opacity='0.6'/></svg>">
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <!-- ====== SECTION LOGIN ====== -->
  <div id="loginSection" class="login-overlay">
    <div class="login-container">
      <div class="login-box">
        <div class="login-header">
          <svg class="logo" viewBox="0 0 100 100" width="60" height="60">
            <!-- Cercle principal gradient -->
            <defs>
              <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#06b6d4;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#10b981;stop-opacity:1" />
              </linearGradient>
            </defs>
            <!-- Trois collaborateurs reprÃ©sentÃ©s par des cercles -->
            <circle cx="30" cy="40" r="15" fill="#06b6d4" opacity="0.9"/>
            <circle cx="50" cy="25" r="15" fill="#10b981" opacity="0.9"/>
            <circle cx="70" cy="40" r="15" fill="#06b6d4" opacity="0.9"/>
            <!-- Connexions entre collaborateurs (rÃ©seau) -->
            <line x1="30" y1="40" x2="50" y2="25" stroke="#10b981" stroke-width="2" opacity="0.6"/>
            <line x1="50" y1="25" x2="70" y2="40" stroke="#06b6d4" stroke-width="2" opacity="0.6"/>
            <line x1="30" y1="40" x2="70" y2="40" stroke="#10b981" stroke-width="2" opacity="0.6"/>
          </svg>
          <h1>ğŸ” Authentification</h1>
          <p>Gestionnaire Collaborateurs - HRBP</p>
        </div>
        
        <form id="loginForm" class="login-form">
          <div class="login-form-group">
            <label for="username">ğŸ‘¤ Utilisateur</label>
            <input 
              type="text" 
              id="username" 
              name="username" 
              placeholder="Entrez votre identifiant" 
              required 
              autocomplete="username"
            >
          </div>

          <div class="login-form-group">
            <label for="password">ğŸ”‘ Mot de passe</label>
            <input 
              type="password" 
              id="password" 
              name="password" 
              placeholder="Entrez votre mot de passe" 
              required 
              autocomplete="current-password"
            >
          </div>

          <div id="loginMessage" class="login-message"></div>

          <button type="submit" class="btn btn-login">
            ğŸš€ Se connecter
          </button>
        </form>
      </div>
    </div>
  </div>

  <header class="header">
    <svg class="logo" viewBox="0 0 100 100" width="70" height="70">
      <!-- Cercle principal gradient -->
      <defs>
        <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#06b6d4;stop-opacity:1" />
          <stop offset="100%" style="stop-color:#10b981;stop-opacity:1" />
        </linearGradient>
      </defs>
      <!-- Trois collaborateurs reprÃ©sentÃ©s par des cercles -->
      <circle cx="30" cy="40" r="15" fill="#06b6d4" opacity="0.9"/>
      <circle cx="50" cy="25" r="15" fill="#10b981" opacity="0.9"/>
      <circle cx="70" cy="40" r="15" fill="#06b6d4" opacity="0.9"/>
      <!-- Connexions entre collaborateurs (rÃ©seau) -->
      <line x1="30" y1="40" x2="50" y2="25" stroke="#10b981" stroke-width="2" opacity="0.6"/>
      <line x1="50" y1="25" x2="70" y2="40" stroke="#06b6d4" stroke-width="2" opacity="0.6"/>
      <line x1="30" y1="40" x2="70" y2="40" stroke="#10b981" stroke-width="2" opacity="0.6"/>
    </svg>
    <h1>âœ¨ Gestionnaire Collaborateurs - HRBP</h1>
    <!-- <p class="subtitle">GÃ©rez et importez vos collaborateurs facilement</p> -->
  </header>

  <!-- ====== NAVIGATION ONGLETS ====== -->
  <div class="nav-tabs">
    <button class="nav-btn active" data-tab="formulaire" onclick="switchTab('formulaire')">
      <span class="nav-icon">â•</span>
      <span class="nav-text">Formulaire</span>
    </button>
    <button class="nav-btn" data-tab="import" onclick="switchTab('import')">
      <span class="nav-icon">ğŸ“¥</span>
      <span class="nav-text">Importer Excel</span>
    </button>    <button class="nav-btn" data-tab="incomplets" onclick="switchTab('incomplets')">
      <span class="nav-icon">âš ï¸</span>
      <span class="nav-text">Ã€ ComplÃ©ter</span>
    </button>
    <button class="nav-btn" data-tab="collaborateurs" onclick="switchTab('collaborateurs')">
      <span class="nav-icon">ğŸ‘¥</span>
      <span class="nav-text">Tous Collaborateurs</span>
    </button>    <button class="nav-btn" data-tab="details" onclick="switchTab('details')">
      <span class="nav-icon">ğŸ“Š</span>
      <span class="nav-text">DÃ©tails</span>
    </button>
  </div>

  <!-- ====== SECTION FORMULAIRE ====== -->
  <section id="formulaire" class="card form-card tab-section active">
    <h2>â• Ajouter un nouveau collaborateur</h2>

    <form id="hrbpForm" class="hrbp-form">
      <div class="form-group">
        <label for="matricule">ğŸ‘¤ Matricule</label>
        <input type="text" id="matricule" name="matricule" placeholder="Ex: CN01234" required>
      </div>

      <div class="form-group">
        <label for="statut">âœ“ Statut</label>
        <select id="statut" name="statut" required>
          <option value="">-- Choisir un statut --</option>
          <option value="INT MDJ">INT MDJ (Stagiaire)</option>
          <option value="CDI">CDI (Contrat IndÃ©fini)</option>
          <option value="CDD">CDD (Contrat DÃ©terminÃ©)</option>
        </select>
      </div>

      <div class="form-group">
        <label for="matriculeGroupe">ğŸ”— Matricule Groupe (optionnel)</label>
        <input type="text" id="matriculeGroupe" name="matriculeGroupe" placeholder="Ex: GROUPE001">
      </div>

      <div class="form-group">
        <label for="nom">ğŸ‘¥ Nom et PrÃ©noms</label>
        <input type="text" id="nom" name="nom" placeholder="Ex: DUPONT Martin" required>
      </div>

      <div class="form-group">
        <label for="fonction">ğŸ’¼ Fonction</label>
        <select id="fonction" name="fonction" required>
          <option value="">-- SÃ©lectionner fonction --</option>
        </select>
      </div>

      <div class="form-group">
        <label for="rattachement">ğŸ¢ Rattachement</label>
        <select id="rattachement" name="rattachement" required>
          <option value="">-- SÃ©lectionner rattachement --</option>
        </select>
      </div>

      <div class="form-group">
        <label for="dateIntegration">ğŸ“… Date d'intÃ©gration</label>
        <input type="date" id="dateIntegration" name="dateIntegration" required>
      </div>

      <div class="form-group">
        <label for="dateFin">ğŸ Date Fin</label>
        <input type="date" id="dateFin" name="dateFin" disabled>
      </div>

      <div id="formMessage" class="message"></div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">ğŸ’¾ Enregistrer</button>
        <button type="reset" class="btn btn-secondary">ğŸ”„ RÃ©initialiser</button>
      </div>
    </form>
  </section>

  <!-- ====== SECTION IMPORT ====== -->
  <section id="import" class="card import-card tab-section">
    <div class="import-header">
      <h2>ğŸ“¥ Importer depuis Excel</h2>
      <p class="info-text">Chargez votre fichier Excel et affichage de tous les donnÃ©es avant d'enregistrer</p>
    </div>

    <div class="import-section">
      <div class="import-info">
        <p>ğŸ“„ <strong>Format attendu:</strong> Excel avec les colonnes suivantes:</p>
        <ul>
          <li>ğŸ‘¤ <strong>Matricule</strong></li>
          <li>ğŸ”— <strong>Matricule Groupe</strong> (optionnel)</li>
          <li>âœ“ <strong>Statut</strong> (INT MDJ, CDI, CDD)</li>
          <li>ğŸ‘¥ <strong>Nom et PrÃ©noms</strong></li>
          <li>ğŸ’¼ <strong>Fonction</strong></li>
          <li>ğŸ¢ <strong>Rattachement</strong></li>
          <li>ğŸ“… <strong>Date d'intÃ©gration</strong> (format: JJ/MM/YYYY)</li>
          <li>ğŸ <strong>Date Fin</strong> (optionnel)</li>
        </ul>
      </div>

      <div class="import-form">
        <div class="file-input-wrapper">
          <label for="excelFile" class="file-label">
            <span class="file-icon">ğŸ“‚</span>
            <span class="file-text">SÃ©lectionner fichier Excel</span>
          </label>
          <input type="file" id="excelFile" accept=".xlsx,.xls,.csv" />
          <div id="fileName" class="file-name-display"></div>
        </div>
        <button type="button" class="btn btn-primary btn-large" onclick="previewExcelFile()">ğŸ‘€ AperÃ§u des donnÃ©es</button>
      </div>

      <div id="previewContainer" style="display: none; margin-top: 30px;">
        <h3>ğŸ” DonnÃ©es Ã  importer</h3>
        <div class="preview-table-container">
          <table id="previewTable" class="data-table">
            <thead id="previewHead"></thead>
            <tbody id="previewBody"></tbody>
          </table>
        </div>
        <div id="importMessage" class="message"></div>
        <div class="import-actions">
          <button type="button" class="btn btn-primary btn-large" onclick="importExcelFile()">âœ… Enregistrer</button>
          <button type="button" class="btn btn-secondary btn-large" onclick="cancelImport()">âŒ Annuler</button>
        </div>
      </div>
    </div>
  </section>

  <!-- ====== SECTION COLLABORATEURS Ã€ COMPLÃ‰TER ====== -->
  <section id="incomplets" class="card tab-section">
    <h2>âš ï¸ Collaborateurs sans Matricule Groupe</h2>
    <p class="info-text">Cliquez sur "Ã‰diter" pour ajouter un Matricule Groupe (la Date Fin sera remplie automatiquement)</p>
    <div id="collaboratorsWithoutMatriculeGroupeContainer" class="table-container"></div>
  </section>

  <!-- ====== SECTION TOUS LES COLLABORATEURS ====== -->
  <section id="collaborateurs" class="card tab-section">
    <h2>ğŸ‘¥ Tous les Collaborateurs</h2>
    <div id="collaboratorsTableContainer" class="table-container"></div>
  </section>

  <!-- ====== SECTION DÃ‰TAILS & STATISTIQUES ====== -->
  <section id="details" class="card details-card tab-section">
    <h2>ğŸ“Š DÃ©tails</h2>
    
    <div class="stats-container">
      <div class="stat-card">
        <div class="stat-number" id="totalCollaborators">0</div>
        <div class="stat-label">Collaborateurs Total</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="totalCDI">0</div>
        <div class="stat-label">CDI</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="totalCDD">0</div>
        <div class="stat-label">CDD</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="totalINT">0</div>
        <div class="stat-label">INT MDJ</div>
      </div>
    </div>

    <div class="chart-section">
      <h3>ğŸ“ˆ RÃ©partition par Rattachement</h3>
      <div class="chart-container">
        <canvas id="collaboratorsChart"></canvas>
      </div>
    </div>
  </section>

  <!-- SheetJS pour lire les fichiers Excel -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <!-- Chart.js pour les diagrammes -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <script src="script.js"></script>
</body>
</html>

